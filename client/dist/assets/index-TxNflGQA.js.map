{"version":3,"file":"index-TxNflGQA.js","sources":["../../src/assets/linkedin.png","../../src/assets/github.png","../../src/components/Footer.tsx","../../src/assets/comski.png","../../src/store/authSlice.tsx","../../src/components/Header.tsx","../../src/Layout/Layout.tsx","../../src/store/chatSlice.tsx","../../src/services/apiSlice.tsx","../../src/models/index.tsx","../../src/assets/avatar.webp","../../src/assets/delete.png","../../src/hooks/useFetchLastMessages.tsx","../../src/services/socket.tsx","../../src/pages/Chat/ChatsList.tsx","../../src/pages/Chat/OnlineUser.tsx","../../src/assets/send.png","../../src/assets/back.png","../../src/Layout/ButtonReturn.tsx","../../src/hooks/useResponsive.tsx","../../src/pages/Chat/ChatBox.tsx","../../src/pages/Chat/Chat.tsx","../../src/pages/Auth/Login.tsx","../../src/pages/Auth/Register.tsx","../../src/assets/home-pic.png","../../src/components/Home.tsx","../../src/App.tsx","../../src/store/store.tsx","../../src/main.tsx"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAADWElEQVR4nO2dz4sPYRzHX1a72GRJ+AeQHzcXP04uSg7YsOvqIuJAObpbm+LksElikSsXVyVxI7+XRXJxkGQLxX70bI+SMt95Zp7ZeWa+71d9jt/v9Hxe3/fMPPN8ZwaEEEIIIYQQohn0AcPANeAFMAVYl9eU74XryZDv0aywB5hMoAGWeL0GBqsUMRc4k8BArWE1CvRUIUQyKCzldBW7qbp/adbw2h1LRp/fH9Y9IGt4vYl1oB9OYDDWktoXQ8j1BAZiLanxGEImEhiItaTcPKU0XxMYiLWkXC9LU/cgrGUlIdQvQUKov/ESQv3NlhDqb7CEUH9TGy3kKXAYWAUs8LUaONqlc5zSlNn4+Q7Xb+YDlxNoknWDkNvAnJzrLPcTaJS1XcjWgG3sTKBR1nYhCwO2sSSBRlnbhQwEbGMggUZZ24XsCNjG9gQaZW0Xcs8fsDvh/gBwJ4FGWduFmP+PUn/Gd88DLiTQJOsWIX/Wko8D670cV2uBI8DLBBpk3SZEhYRYwj8EJYT6JUgI9TdeQqi/2RJC/Q1ujJBY24n1PY+Bs8Aufwq+wk9clwHrgG3ACPBQQqoTMu0np5sCv2MNcAn4pYQQTcgjYCPl2AK80y6L0kIu+tXIGCwFHugYQmEh53KuVBK4PPBEB3UKCank9jFgZaSbW7vuLKtKjklIWrh/0LxVQtLihITEod8viJXFTSR/6hhSjM3ADeDzXxPFD8CYn60X5a6EhHOyw0z7h1+1LMIpCQnjQM6GucTsJ5y9EpKfxcCngIZ9BBYRxgYJyc+hAs06SBjLJSQ/two06ybhZ2yaqefkfYFmuc+E4K6VSUhOvhdo1jfCkZCGXHvTxcV/kJDErvaaEiIhpl3W/1FClBCUkAyUECUEJSQDJUQJQQnJQAlRQlBCMlBClBCUkAyUECUEJSQDJUQJQQnJQAlRQmhEQlRIiDXgh6CEUL8ECaHFQvRCF6LJ+BJDSDc+9c0qqucxhFxNYCDWknKPVS/NUAIDsZaUu9GnNL3AqwQGYw2vyZhvkB5MYEDW4Jr2z7ePymgCA7OGlrtJNDo9/q3HdQ/OGpaMkQqfvzKDe+uxjil0lDHhn143K/T6F+2O+3NrTR6Z6cEz4Io/m3I9EkIIIYQQQghS5zccoQvHPr2pqwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAABr0lEQVR4nO2Vu0oDQRSGPxVUFCwUJF4RL621F0RRsDOoqLWNhZdokdbKt1CJF7QSBEWCFoJPYGMVKy3shIgx3mKiEpiFZZiZnd0EscgPQ9jN+c+35zBnBkr6h2oHIsAFkADSYiXEuxWgrZjAFmATyAI/HisHHAEdhUIngRcLoLxSQDgodE1U4Bfqrn41SKW5AqBuuHXlrYr29gG9QMwDFBNxA1Lbm23AquRVUjeGgUagQvyOiPeOqiX/ts3IqHZvN/7UI/mzopNaRTQtHPQJHlLkWDYZzhWGY4LpVMoTNwXfKsD9AcFy1QlTcMpjY/lRreJQ0SqtANcRTA1SnldT8J0CPBEQPC3luTcFxxXgazGXflQD3Eh5zkyGqGacLm1PHzGvV4ocUZMpf59mNPA3YAeYBTolX/55DtgD3hXeDNDk9cUHLsM8cKL4gHHJMwp8GM7wfduLPykMj0A9cCgSPwHrGt+GBvpsU62jGde1uGDp6dJci1O2UEdLwDfwAIxZ7OxyBXSRgAqL9roTmuTEJINUKis/RlvAlwX4E9gFQhRRIXFtVmr+L/Mx6yXxZ/oFDl37po6ZopsAAAAASUVORK5CYII=\"","import { Link } from \"react-router-dom\";\nimport linkedin from \"../assets/linkedin.png\";\nimport github from \"../assets/github.png\";\nconst Footer = () => {\n  return (\n    <div className=\"font-kode p-5\">\n      <p className=\"hidden\">Broski</p>\n      <div className=\"flex flex-row justify-between items-center\">\n        <Link\n          to=\"https://www.linkedin.com/in/olivier-bourgogne/\"\n          className=\"\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <img src={linkedin} alt=\"LinkedIn\" className=\"w-5 h-5\" />\n        </Link>\n        <p className=\"\">\n          @broskisocialchat <span className=\"hidden\">by Olivier Bourgogne</span>\n        </p>\n        <Link\n          to=\"https://github.com/burgundythedev\"\n          className=\"\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <img src={github} alt=\"GitHub\" className=\"w-5 h-5\" />\n        </Link>\n      </div>\n\n      <p className=\"hidden\">Broski</p>\n    </div>\n  );\n};\n\nexport default Footer;\n","export default \"__VITE_ASSET__B5o2y5IX__\"","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { AuthState, RegisterInfo } from \"../models\";\n\nexport const initialState: AuthState = {\n  user: null,\n  isLoggedIn: false,\n  isLoggedInError: false,\n\n  isRegistered: false,\n  isRegisteredError: false,\n};\n\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    addUserRegister(\n      state,\n      action: PayloadAction<RegisterInfo & { _id: string; token: string }>\n    ) {\n      const { _id, name, email, token } = action.payload;\n\n      state.user = { _id, email, name, token, typeToken: \"register\"};\n    },\n\n    loginUser(\n      state,\n      action: PayloadAction<{\n        _id: string;\n        name: string;\n        email: string;\n        token: string;\n        password: string;\n      }>\n    ) {\n      const { _id, name, email, token, password } = action.payload;\n\n      localStorage.setItem(\n        \"userInfo\",\n        JSON.stringify({ _id, name, email, token, password })\n      );\n\n      state.user = { _id, name, email, token, password, typeToken: \"login\"};\n    },\n\n    logoutUser(state) {\n      localStorage.removeItem(\"userInfo\");\n\n      state.user = null;\n    },\n  },\n});\n\nexport const { addUserRegister, loginUser, logoutUser } = authSlice.actions;\n\nexport default authSlice.reducer;\n","import { Link, useNavigate } from \"react-router-dom\";\nimport logo from \"../assets/comski.png\";\nimport { useDispatch } from \"react-redux\";\nimport { logoutUser } from \"../store/authSlice\";\n\nconst Header = () => {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const userInfo = JSON.parse(localStorage.getItem(\"userInfo\") || \"{}\");\n\n  const isLoggedIn = userInfo.token && userInfo.type === \"login\";\n\n  const handleLogout = () => {\n    dispatch(logoutUser());\n    localStorage.removeItem(\"userInfo\");\n    navigate(\"/login\");\n  };\n  const handleRedirectToChat = () => {\n    navigate(\"/chat\");\n  };\n  return (\n    <div className=\"flex flex-row items-center justify-between p-5 font-kode\">\n      <Link to=\"/home\" className=\"flex flex-row items-center\">\n        <img src={logo} alt=\"logo-company\" className=\"w-14 h-14 rounded-lg\" />\n        <span className=\"hidden\">BROSKI SOCIAL</span>\n      </Link>\n      <nav>\n        <ul className=\"lg:flex flex-row\">\n          {isLoggedIn ? (\n            <>\n              <li className=\"mb-2 lg:mb-0 mr-2 md:text-xl\">\n                Welcome,\n                <span className=\"ml-1 text-blue-700 font-extrabold md:text-xl\">{userInfo.name}</span>\n              </li>\n              <div className=\"flex flex-row\">\n                <li\n                  className=\"p-1 text-sm mr-1 bg-customYellow rounded-lg cursor-pointer w-20 text-center md:text-xl\"\n                  onClick={handleRedirectToChat}\n                >\n                  Chats\n                </li>\n                <li\n                  className=\"p-1 text-sm bg-customYellow rounded-lg cursor-pointer w-20 text-center md:text-xl\"\n                  onClick={handleLogout}\n                >\n                  Logout\n                </li>\n              </div>\n            </>\n          ) : (\n            <>\n              <Link to=\"register\" className=\"p-5 md:text-xl\">\n                Register\n              </Link>\n              <Link to=\"login\" className=\"p-5 md:text-xl\">\n                Login\n              </Link>\n            </>\n          )}\n        </ul>\n      </nav>\n    </div>\n  );\n};\n\nexport default Header;\n","import Footer from \"../components/Footer\";\nimport Header from \"../components/Header\";\n\ninterface LayoutProps {\n  children: React.ReactNode;\n}\nconst Layout = ({ children }: LayoutProps) => {\n  return (\n    <div className=\"flex flex-col min-h-screen overflow-hidden lg:p-5\">\n      <Header />\n      <main className=\"grow\">{children}</main>\n      <Footer />\n    </div>\n  );\n};\n\n\nexport default Layout;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { ChatType, ChatState } from \"../models\";\n\nconst initialState: ChatState = {\n  chats: [],\n  loading: false,\n  currentChat: null,\n};\n\nexport const chatSlice = createSlice({\n  name: \"chat\",\n  initialState,\n  reducers: {\n    getUserChats: (state, action: PayloadAction<ChatType[]>) => {\n      state.chats = action.payload;\n    },\n    addChat: (state, action: PayloadAction<ChatType>) => {\n      state.chats.push(action.payload);\n    },\n\n    setCurrentChat: (state, action: PayloadAction<ChatType | null>) => {\n      state.currentChat = action.payload;\n    },\n\n    isChatsLoading: (state, action: PayloadAction<boolean>) => {\n      state.loading = action.payload;\n    },\n  },\n});\n\nexport const { getUserChats, addChat, isChatsLoading, setCurrentChat } =\n  chatSlice.actions;\n\nexport default chatSlice.reducer;\n","import { createApi, fetchBaseQuery } from \"@reduxjs/toolkit/query/react\";\nimport { ChatResponse, ChatType, Message, RegisterInfo, User } from \"../models\";\n\nexport const apiSlice = createApi({\n  reducerPath: \"api\",\n  baseQuery: fetchBaseQuery({\n    baseUrl: \"https://broski-social-chat-server.onrender.com/api\",\n  }),\n\n  tagTypes: [\"Chat\", \"Message\"],\n\n  endpoints: (builder) => ({\n    registerUser: builder.mutation<User, RegisterInfo>({\n      query: (userInfo) => ({\n        url: \"/users/register\",\n        method: \"POST\",\n        body: userInfo,\n      }),\n    }),\n\n    loginUser: builder.mutation<User, { email: string; password: string }>({\n      query: (credentials) => ({\n        url: \"/users/login\",\n        method: \"POST\",\n        body: credentials,\n      }),\n    }),\n\n    fetchChatsByUserId: builder.query<ChatResponse, string>({\n      query: (userId) => `/chats/${userId}`,\n      providesTags: [\"Chat\"],\n    }),\n    fetchUsersByIds: builder.query<User[], string>({\n      query: (ids) => `/users?ids=${ids}`,\n    }),\n\n    fetchRegisteredUsers: builder.query<User[], void>({\n      query: () => \"/users\",\n    }),\n    createChat: builder.mutation<\n      ChatType,\n      { firstId: string; secondId: string }\n    >({\n      query: (members) => ({\n        url: \"/chats\",\n        method: \"POST\",\n        body: members,\n      }),\n      invalidatesTags: [\"Chat\"],\n    }),\n    fetchMessagesByChatId: builder.query<Message[], string>({\n      query: (chatId) => `/messages/${chatId}`,\n      providesTags: (_, __, chatId) => [{ type: \"Message\", id: chatId }],\n    }),\n\n    sendChatMessage: builder.mutation<\n      Message,\n      { chatId: string; senderId: string; text: string }\n    >({\n      query: ({ chatId, senderId, text }) => ({\n        url: `/messages/${chatId}`,\n        method: \"POST\",\n        body: { senderId, text },\n      }),\n      invalidatesTags: (_, __, { chatId }) => [{ type: \"Message\", id: chatId }],\n    }),\n    deleteChat: builder.mutation<{ success: boolean; chatId: string }, string>({\n      query: (chatId) => ({\n        url: `/chats/${chatId}`,\n        method: \"DELETE\",\n      }),\n      invalidatesTags: [{ type: \"Chat\", id: \"LIST\" }, { type: \"Message\" }],\n    }),\n  }),\n});\n\nexport const {\n  useRegisterUserMutation,\n  useLoginUserMutation,\n  useFetchChatsByUserIdQuery,\n  useFetchUsersByIdsQuery,\n  useFetchRegisteredUsersQuery,\n  useCreateChatMutation,\n  useFetchMessagesByChatIdQuery,\n  useSendChatMessageMutation,\n  useDeleteChatMutation,\n} = apiSlice;\n","//Auth related\n\nexport interface User {\n  _id: string;\n  token: string;\n  typeToken: string;\n  email: string;\n  name: string;\n  password?: string;\n}\n\nexport interface AuthState {\n  user: User | null;\n  isLoggedIn: boolean;\n  isLoggedInError: boolean;\n  isRegistered: boolean;\n  isRegisteredError: boolean;\n}\n\nexport interface RegisterInfo {\n  name: string;\n  email: string;\n  password: string;\n  typeToken: string;\n}\n\nexport interface RegisterResponse {\n  _id: string;\n  name?: string;\n  email: string;\n  token: string;\n}\nexport interface BackendError {\n  status?: number;\n  data?: string;\n}\n\n//Chat related\n\nexport interface ChatState {\n  chats: ChatType[];\n  loading: boolean;\n  currentChat: ChatType | null;\n}\n\nexport interface ChatResponse {\n  chats: ChatType[];\n}\n\nexport interface ChatType {\n  _id: string;\n  members: string[];\n  createdAt: string;\n  lastMessage?: {\n    _id: string;\n    text: string;\n    createdAt: string;\n  };\n}\n\nexport interface ChatWithMetadata extends ChatType {\n  unreadMessageCount: number;\n}\n\n//Message related\n\nexport interface Message {\n  senderName: string;\n  _id: string;\n  chatId: string;\n  senderId: string;\n  text: string;\n  createdAt: string;\n}\n\n//Socket related\nexport interface UserOnlineInfo {\n  userID: string;\n  userSocketID: string;\n}\n\n//Date Format\n\nexport const formatDate = (dateString: string | number | Date) => {\n  const date = new Date(dateString);\n\n  return date.toLocaleDateString(\"en-US\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n};\n//others\n// Assuming you have a limited set of tags\nexport type TagType = \"Chats\" | \"Messages\" | \"Users\";\n","export default \"__VITE_ASSET__BIQ95U7o__\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFWUlEQVR4nO2d328UVRTH75OJ/geEds6922I797bEbimrhGJJV1tCItX+gIo0kbTRhhp/1AdtE8HtgyU8mEiNPGviD9L4jj7qA2jUJxIh+iCJPGAKLitEfRlzdndqC1tmbtN27pw9n+Qk7WZo5tzv3ntnPptZhGAYhmEYhmEYhmEYhmEYhqGO1vohUPo0KHMdlAki6ndQZh7/TdLnTRZQZj5GEKvKk+a9pM+bLFB51wdek9kTdWxjRu8NZ8rWnF0dAtV3/WYdz3AgbgBgfJD6k5ibc7DFdR2U/higrVXUAwD+AVD6jgMDHzy49B0pTZ+gzPbm9gZP6VvY8Gu5fHB5cDwoHp1yqi4Pjgev5vKVKzSlb+E5C6qAMuex0eO7nkx84IsRhedYnS3nBUW8jN+LDbY0tQc/D7k3M4r31NXhicBv2lkJBXS/SCtNTaYRpF70pLlda21+v+eZxAe7GLPwXNe42bztKf2llO0twvkwlFm6r4HEN2izqrr9ruVBx59Xvhb+HvP8l5zeY3Bm4Im+0LGvPOWTfocXN3E5O5rd5/4eEy5TlMMorgilunwVhavUZyD6T+EquNHhSeJ0phzK1eGJ4Plsd2XJknpRuApeddTa1AnX0vaMv0O4DF514EaHa6sDAxZsRpV7k3rR+TBq4Ul9rbyvTJ8JSu+cS2VdmT4TBvGbSDueMj9iM5dOFBIf2NI66+LUXDg7fhBpB6T5Gpu5MDGb+MCW1lkXxmfCDfwrkXY8pT/DZr4YeyPxgS2tsz4fez1csj4VaQekOYvNnBuZjGz85uxC8G7+uWBXSzboas0Ghfxg+bWkjg/ro5HJcMn6QKQdUOYUNnN64Hhk44X84LJ2CfVEoXcosePDmj/0YngTeFKkHU/qV7CZt/tHIxvvas2uuqHEn/G1pI4P663+0UogSk+JtAMZPYrNvLx/ILJxUOa+u2J8Lanjw3pp/0BlyQJzRKSdRtX2FDZzZM+BxAPpXqHdbQI5/ER/dYb4eZF2PK81i830d/YkHkixhpeKE0hfZ091hvgdIu1kMtrDZnIml9pAciZXPg4/gBNpZ9u2zkewmZbmnaldslqaK5+tNzQ8/rCgACh9Fxu6MbOQuk39xszZ6j2IviuoEFcwgoMzhJRYtBWM4OAeQkos2gpGcDAQUmLRVjCCg0sWKbFoKxjBwU2dlFi0FYzgYCCkxKKtYAQHAyElFm0FIzgYCCmxaCsYwcFASIlFW8EIDgZCSizaCkZwMBBSYtFWMIKDgZATizaCERwLhKRYtBGM4FggJMViiKfMT1GCERwLJBSLKEcFNeIIRnAsEJJi0UYwgmOBkBSLNoIRHAuEpFi0EYzgWCAkxaKNYIQNGGD8zGOj/j5JsWgjGGEDAsHaqL9PUizaCEZwLBCSYtFGMIJjgZAUizaCERwLhKRYtBGM4FggZMViXMEIDl1lkRaLcQUjOHQfQlos3isYv5uacz6QSycKdMViXMEIDgVCWizGFYxdNZ4B3G35zOBGHU9aLMYVjIXeoeVvEgq/cWcu/4CnajfxeNJiMa5gvDm7UB40fCfjOxcHK+q58806nrRYXM8j0qWEi7RYDPGUHsYmx7oPJj7gpYg6tvdgGMiwoAp+nzo2qR/tCP6Y/TDxQS+tUXjj6u94rBxIKr8TywaQ+nts9M2+w4kPfGmNmn56JLwHuSiog/8ZiyfNP+HS9e3kqciHQUtbNCu+mTz5/1Ilzd9K6d2iHgBoexak/qt6WeleSVOS0j8k6gkpfQBpFkDpXz2p/006BA/PQepf8L4DPypIenwYhmEYhmEYhmEYhmEYhmEYhmEYRmwF/wHBGZeWya7mywAAAABJRU5ErkJggg==\"","import { useState, useEffect } from 'react';\nimport { Message } from '../models/index'; \n\nfunction useLastMessages(chatIds: string[]) { \n  const [lastMessages, setLastMessages] = useState<{[key: string]: Message | undefined}>({});\n  \n  useEffect(() => {\n    const fetchLastMessages = async () => {\n      const promises = chatIds.map(async (chatId) => {\n        const response = await fetch(`http://localhost:4000/api/messages/${chatId}`);\n        const data: Message[] = await response.json(); \n        const lastMessage = data.length > 0 ? data[data.length - 1] : undefined;\n        return { chatId, lastMessage };\n      });\n\n      const results = await Promise.all(promises);\n      const lastMessagesMap = results.reduce<{[key: string]: Message | undefined}>((acc, { chatId, lastMessage }) => {\n        acc[chatId] = lastMessage;\n        return acc;\n      }, {});\n\n      setLastMessages(lastMessagesMap);\n    };\n\n    if (chatIds.length > 0) {\n      fetchLastMessages();\n    }\n  }, [chatIds]);\n\n  return lastMessages;\n}\n\nexport default useLastMessages;\n","import io from \"socket.io-client\";\n\nconst SOCKET_URL = \"https://broski-social-chat-server.onrender.com\";\nconst socket = io(SOCKET_URL);\n\nexport default socket;","import { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setCurrentChat } from \"../../store/chatSlice\";\nimport {\n  useDeleteChatMutation,\n  useFetchChatsByUserIdQuery,\n  useFetchUsersByIdsQuery,\n} from \"../../services/apiSlice\";\nimport { ChatType, User, formatDate } from \"../../models/index\";\nimport avatar from \"../../assets/avatar.webp\";\nimport trashIcon from \"../../assets/delete.png\";\nimport useLastMessages from \"../../hooks/useFetchLastMessages\";\nimport socket from \"../../services/socket\";\nimport { RootState } from \"../../store/store\";\nimport { useNavigate } from \"react-router-dom\";\n\ntype UsersById = { [key: string]: User };\n\nconst ChatList = () => {\n  const dispatch = useDispatch();\n  const userInfo = JSON.parse(localStorage.getItem(\"userInfo\") || \"{}\");\n  const [users, setUsers] = useState<{ [key: string]: User }>({});\n  const [onlineUsers, setOnlineUsers] = useState<string[]>([]);\n  const [deleteChat] = useDeleteChatMutation();\n  const currentChat = useSelector((state: RootState) => state.chat.currentChat);\n  const [unreadChats, setUnreadChats] = useState<string[]>([]);\n  const navigate = useNavigate();\n  const [isSmartphone, setIsSmartphone] = useState(false);\n\n  const {\n    data: chatData,\n    isLoading: isLoadingChats,\n    error: errorChats,\n    refetch,\n  } = useFetchChatsByUserIdQuery(userInfo._id);\n  useEffect(() => {\n    socket.on(\"getOnlineUsers\", (onlineUsersList: { userID: string }[]) => {\n      setOnlineUsers(\n        onlineUsersList.map((user: { userID: string }) => user.userID)\n      );\n    });\n\n    socket.emit(\"addNewUser\", userInfo._id);\n\n    return () => {\n      socket.off(\"getOnlineUsers\");\n    };\n  }, [userInfo._id]);\n  useEffect(() => {\n    socket.on(\n      \"unreadMessage\",\n      ({ chatId, unread }: { chatId: string; unread: boolean }) => {\n        if (unread) {\n          setUnreadChats((prevUnreadChats) => [...prevUnreadChats, chatId]);\n        } else {\n          setUnreadChats((prevUnreadChats) =>\n            prevUnreadChats.filter((id) => id !== chatId)\n          );\n        }\n      }\n    );\n\n    return () => {\n      socket.off(\"unreadMessage\");\n    };\n  }, []);\n\n  useEffect(() => {\n    if (chatData?.chats && chatData.chats.length > 0) {\n      dispatch(setCurrentChat(chatData.chats[0]));\n    }\n  }, [chatData?.chats, dispatch]);\n\n  const memberIds =\n    chatData?.chats\n      .flatMap((chat) => chat.members)\n      .filter((id) => id !== userInfo._id)\n      .join(\",\") || \"\";\n  const { data: usersData } = useFetchUsersByIdsQuery(memberIds, {\n    skip: memberIds.length === 0,\n  });\n\n  useEffect(() => {\n    if (usersData) {\n      const usersById = usersData.reduce(\n        (acc: UsersById, user) => ({ ...acc, [user._id]: user }),\n        {}\n      );\n      setUsers(usersById);\n    }\n  }, [usersData]);\n  useEffect(() => {\n    const handleResize = () => {\n      setIsSmartphone(window.innerWidth <= 768);\n    };\n\n    handleResize();\n\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n  const lastMessages = useLastMessages(\n    chatData?.chats.map((chat) => chat._id) || []\n  );\n  const handleDeleteChat = async (chatId: string) => {\n    try {\n      await deleteChat(chatId).unwrap();\n\n      refetch();\n    } catch (err) {\n      console.error(\"Error deleting chat\", err);\n    }\n  };\n  const truncateMessage = (message: string, maxLength = 10) => {\n    if (message.length > maxLength) {\n      return `${message.substring(0, maxLength)}...`;\n    } else {\n      return message;\n    }\n  };\n  const handleChatClick = (chat: ChatType | null) => {\n    if (chat) {\n      dispatch(setCurrentChat(chat));\n      setUnreadChats((prevUnreadChats) =>\n        prevUnreadChats.filter((id) => id !== chat._id)\n      );\n      if (isSmartphone) {\n        navigate(`/chat/${chat._id}`);\n      }\n    }\n  };\n  if (isLoadingChats)\n    return <div className=\"font-kode p-2\">Loading chats...</div>;\n  if (errorChats)\n    return <div className=\"font-kode p-2\">Error fetching chats</div>;\n\n  return (\n    <div className=\"font-kode flex flex-col grow\">\n      <h2 className=\"text-xl font-semibold mb-5\">Chats</h2>\n      <ul className=\"flex-1 border-t border-black rounded-xl overflow-y-auto md:overflow-y-visible\">\n        {chatData?.chats.length === 0 ? (\n          <p className=\"text-center text-xl py-5 mt-20\">\n            Create a chat and enjoy\n          </p>\n        ) : (\n          chatData?.chats.map((chat) => (\n            <div\n              key={chat._id}\n              className={`flex flex-col p-4 rounded-xl mb-5 cursor-pointer border-t-4 border-customYellow w-full ${\n                unreadChats.includes(chat._id)\n                  ? \"bg-blue-100 animate-pulse\"\n                  : currentChat && chat._id === currentChat._id\n                  ? \"bg-rgbYellow\"\n                  : \"bg-white\"\n              }`}\n              onClick={() => handleChatClick(chat)}\n            >\n              <div>\n                <div>\n                  {chat.members\n                    .filter((id) => id !== userInfo._id)\n                    .map((id) => {\n                      const displayName = users[id]?.name || \"Unknown User\";\n                      const isOnline = onlineUsers.includes(id);\n                      return (\n                        <div key={id} className=\"flex justify-between mb-4\">\n                          <div className=\"flex items-center\">\n                            <img\n                              className=\"w-5 h-5\"\n                              src={avatar}\n                              alt=\"Avatar\"\n                            />\n                            <span className=\"ml-5 text-xl\">{displayName}</span>\n                            {isOnline && (\n                              <span className=\"inline-block ml-2 bg-green-500 rounded-full w-3 h-3\"></span>\n                            )}\n                          </div>\n                          <div\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleDeleteChat(chat._id);\n                            }}\n                          >\n                            <button className=\"text-red-500\">\n                              <img\n                                className=\"w-7 hover:scale-125 \"\n                                src={trashIcon}\n                                alt=\"Delete chat\"\n                              />\n                            </button>\n                          </div>\n                        </div>\n                      );\n                    })}\n\n                  <div>\n                    <p className=\"mb-2 font-semibold\">\n                      {lastMessages[chat._id]\n                        ? truncateMessage(lastMessages[chat._id]?.text || \"\")\n                        : \"Start a chat\"}\n                    </p>\n                  </div>\n                </div>\n              </div>\n              <div>\n                <p className=\"text-xs mt-2\">\n                  {formatDate(\n                    lastMessages[chat._id]?.createdAt ?? chat.createdAt\n                  )}\n                </p>\n              </div>\n            </div>\n          ))\n        )}\n      </ul>\n    </div>\n  );\n};\nexport default ChatList;\n","import { useEffect, useState } from \"react\";\nimport {\n  useFetchRegisteredUsersQuery,\n  useCreateChatMutation,\n  useFetchChatsByUserIdQuery,\n} from \"../../services/apiSlice\";\nimport socket from \"../../services/socket\";\nimport { User } from \"../../models\";\n\nconst OnlineUser = () => {\n  const { data: users, isLoading: loadingUsers } =\n    useFetchRegisteredUsersQuery();\n  const userInfo = JSON.parse(localStorage.getItem(\"userInfo\") || \"{}\");\n  const loggedInUserId = userInfo._id;\n  const { data: chatData, isLoading: loadingChats } =\n    useFetchChatsByUserIdQuery(loggedInUserId);\n  const [createChat] = useCreateChatMutation();\n  const [displayUsers, setDisplayUsers] = useState<User[]>([]);\n  const [onlineUsers, setOnlineUsers] = useState<string[]>([]);\n  const [newMessageNotification, setNewMessageNotification] = useState(\"\");\n\n  useEffect(() => {\n    socket.on(\"getOnlineUsers\", (onlineUsersList) => {\n      const userIds = onlineUsersList.map(\n        (user: { userID: string }) => user.userID\n      );\n      setOnlineUsers(userIds);\n    });\n\n    socket.on(\"receiveMessageNotification\", ({ chatId }) => {\n      setNewMessageNotification(`New message in chat: ${chatId}`);\n      console.log(\"New message in chat:\", chatId);\n    });\n\n    return () => {\n      socket.off(\"getOnlineUsers\");\n      socket.off(\"receiveMessageNotification\");\n    };\n  }, []);\n\n  useEffect(() => {\n    if (users && chatData?.chats) {\n      const filteredUsers = users.filter(\n        (user) =>\n          !chatData.chats.some((chat) => chat.members.includes(user._id)) &&\n          user._id !== loggedInUserId\n      );\n      setDisplayUsers(filteredUsers);\n    }\n  }, [users, chatData, loggedInUserId]);\n\n  const handleCreateChat = async (secondUserId: string) => {\n    try {\n      await createChat({\n        firstId: loggedInUserId,\n        secondId: secondUserId,\n      }).unwrap();\n      console.log(\"Chat created successfully\");\n    } catch (err) {\n      console.error(\"Failed to create chat:\", err);\n    }\n  };\n\n  if (loadingUsers || loadingChats) return <div>Loading...</div>;\n\n  return (\n    <div className=\"font-kode\">\n      <div>\n        <h2 className=\"text-xl font-semibold\">Online Users</h2>\n      </div>\n      <div>\n        {displayUsers.length > 0 ? (\n          <ul className=\"flex flex-wrap flex-row mt-5\">\n            {displayUsers.map((user) => (\n              <li\n                key={user._id}\n                className=\"bg-customYellow p-2 rounded-lg mr-2 my-2 cursor-pointer\"\n                onClick={() => handleCreateChat(user._id)}\n      \n\n              >\n                {user.name}\n                {onlineUsers.includes(user._id) && (\n                  <span className=\"inline-block bg-green-500 rounded-full w-3 h-3 animate-fade\"></span>\n                )}\n\n                {newMessageNotification.includes(user._id) && (\n                  <p className=\"text-xs text-red-500\">(New Message)</p>\n                )}\n              </li>\n            ))}\n          </ul>\n        ) : (\n          <div className=\"py-5 lg:text-xs\">\n            Invite your friends and family to Broski for even more fun chats!\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default OnlineUser;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEiklEQVR4nO2cS2gVVxjHf2m8rWibKqJmEauuio0LBXUhglBEClXpQimFIn24LS6qKGZhXGhEjGBctEYXIi7iYycKRRCFIlVBLbWvNAhaFV/4aKpJSb1HBk/gEubeOzN3zmNmvh/8V+o5Z77vzufM/3xnQBAEQRAEQRAEQYjLe8AW4CIwBPwN7AFaYo8kROZd4CvgHPASUCG6DrwTfUihHuOAj4E+4EWVoI9Vd91RhbosAPYC9yMGvVI36w8v1KrrvyUIeqX+DR1dSFzX4+pS+FTCKM3AMuCw/rWqlBXcRUII7cBO4J6BoI+qDMwOm7yotAHrgasGg16poJQVnhZgLXAS+N9S4Ef1dVGj32y4rkdR8EY8iYLRbqGuR9VRCkKb5boeVSvIMS0O63oUPQBK5IyS/lXF8WHSUvBS9jjG3+8hR7Q7ruuDQG/MO20hOanr1xyXksDX/xx4GuPf/EmGfZi1wJkUfZhG9CPwATCQZ+uh2YPn9TAdACYCZ/NqPbiu66qKgjq/Sa/x+7xZD77UdVVFzyqe3b/Ji/XgW11XVfQXMEevOSiJI1m2Hnyt66qKfqgIXFC/H2bVevC1rqsa2q832tHdC9ezZj34XtdVFf2ntx5HeUPbGpmwHirretmDYKqYCkrM0jHX1N3gmFash1bgoP7PRmVUV3W3QyVfpDCucethKnDDgwCqBnRCv1xVshgYbnDc37HAdx4EUCVUUCa3AU1jrmlGSg8MHTYScNeDQKoEeg6sCbme4E64klJyZ9lIQBbr/i1gfsi1BHfC8ZTmOI8lLnsQUBVDF/RDQxhbU5xnna0EfOpBUFVEHQLeqnIdq1N8dB7Sj+TW2O1BcFUdJ3NDjfXPS9kaOYYDujwItArRP8CqGuuertvEc9H14FsSBvTOVTVK2qfPVdeDL0k4r18Sa9FrYF4vuh66PHAyS3XW+K2hub3penCRhBG9Y1WP5YaatvrxDJtJeAR8GGFN7wNPDK3BivXgYxJ+idhxMFn/Sk2sweuuB5NJOBXxpSfYDj1tcB1edz2YSsJevWMVhR7Dd6F3XQ8mkzCsd96i8qXh4HvT9WAjCXeARTHmW6L3eU0mwHnXg60kXAnZNqzFzIQn2Atx4CJuEvqACTHGfxv42ULwnVsPppNQBjpDtg1r0aQdSWVBXlgPppIwCHySYMztloLvlfXQCJ0hPZe/AnMTjPWZxZ6kP8gRs/Sz9Ab93Z1Swk/H2Dwj5qX14IpWfWzIVvC9th5sMx74yWLwrXY9ZIEjloNvtevBdzY7CH6mrAeTfOToNHzmrAcTzIl5RlcV3XpIkzd157GL4GfaekiLlY6CH2if64v3gY0OExDHCs8t6xwF37uuB1fMTnhet1GJ9TDGwLMZfGsHLrJEl8UEiPXgOAliPThMglgPjpMg1oPjJBTeenCZBLEeHCch810PrtiRUgJy0fWQ1ST0u76Aoiehw/Xii5yEsnQ9uE2CWA+OkyDWg8MkiPVgmO4InycWDLOrxucNppmeXHjNGt3SGHw967Z+652i/0wQBEEQBEEQBAEXvALr4yAo+okBhgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAhklEQVR4nO2WOwqAMBAFBz8XEJKb6aktRFt7LfUEsQkiaCrJruAOvCLVQMK+DRjGXymAWlrqgQGYgVJK6oARCDGNhjRIiN2DNLvYJaRZxR6YEtK3WYFOWhpi9qfJ6DNLQ+q51MRe4Kq3VAnllC9A+7lxUi0Q1cpUXRKqa/H6EajOk2EY3DkANGS6e2z3DR0AAAAASUVORK5CYII=\"","import { useNavigate } from \"react-router-dom\";\nimport back from \"../assets/back.png\";\nconst ButtonReturn = () => {\n  const navigate = useNavigate();\n\n  const handleGoBack = () => {\n    navigate(\"/chat\");\n  };\n\n  return (\n    <button\n      onClick={handleGoBack}\n      className=\"bg-customYellow p-2 rounded-xl flex flex-row items-center\"\n    >\n      <img\n        src={back}\n        className=\"w-3\n       h-3\"\n      />\n      <p className=\"ml-4 font-kode text-sm font-bold\">Chat list</p>\n    </button>\n  );\n};\n\nexport default ButtonReturn;\n","import { useState, useEffect } from 'react';\n\nfunction useResponsive(widthThreshold = 728) {\n    const [isWide, setIsWide] = useState(window.innerWidth > widthThreshold);\n\n    useEffect(() => {\n        const handleResize = () => {\n            setIsWide(window.innerWidth > widthThreshold);\n        };\n        \n        window.addEventListener('resize', handleResize);\n        return () => {\n            window.removeEventListener('resize', handleResize);\n        };\n    }, [widthThreshold]);\n\n    return isWide;\n}\nexport default useResponsive;","import React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"../../store/store\";\nimport {\n  useFetchMessagesByChatIdQuery,\n  useSendChatMessageMutation,\n  useFetchUsersByIdsQuery,\n} from \"../../services/apiSlice\";\nimport InputEmoji from \"react-input-emoji\";\nimport { formatDate } from \"../../models\";\nimport socket from \"../../services/socket\";\nimport send from \"../../assets/send.png\";\nimport ButtonReturn from \"../../Layout/ButtonReturn\";\nimport useResponsive from \"../../hooks/useResponsive\";\n\nconst ChatBox = () => {\n  const currentChat = useSelector((state: RootState) => state.chat.currentChat);\n  const userInfo = JSON.parse(localStorage.getItem(\"userInfo\") || \"{}\");\n  const [messageText, setMessageText] = useState(\"\");\n  const [sendChatMessage] = useSendChatMessageMutation();\n  const scroll = useRef<HTMLDivElement>(null);\n  const isWide = useResponsive(728);\n\n  const {\n    data: messages,\n    isLoading,\n    error,\n    refetch,\n  } = useFetchMessagesByChatIdQuery(currentChat?._id ?? \"\", {\n    skip: !currentChat,\n  });\n\n  const senderIds = useMemo(() => {\n    const ids = messages?.map((message) => message.senderId) || [];\n    return [...new Set(ids)].join(\",\");\n  }, [messages]);\n\n  const { data: users } = useFetchUsersByIdsQuery(senderIds, {\n    skip: !senderIds,\n  });\n\n  const usersById = useMemo(() => {\n    return (\n      users?.reduce((acc: { [key: string]: unknown }, user) => {\n        acc[user._id] = user;\n        return acc;\n      }, {}) || {}\n    );\n  }, [users]);\n\n  useEffect(() => {\n    socket.on(\n      \"receiveMessage\",\n      (newMessage: { chatId: string | undefined }) => {\n        if (newMessage.chatId === currentChat?._id) {\n          refetch();\n        }\n        scroll.current?.scrollIntoView({ behavior: \"smooth\" });\n      }\n    );\n\n    return () => {\n      socket.off(\"receiveMessage\");\n    };\n  }, [currentChat, refetch]);\n\n  const handleSubmit = useCallback(\n    async (e?: React.FormEvent<HTMLFormElement>) => {\n      e?.preventDefault();\n      if (!messageText.trim() || !currentChat) return;\n\n      const messageData = {\n        chatId: currentChat._id,\n        senderId: userInfo._id,\n        text: messageText,\n        receiverId: currentChat.members.find((id) => id !== userInfo._id),\n      };\n\n      socket.emit(\"sendMessage\", messageData);\n      await sendChatMessage(messageData).unwrap();\n      setMessageText(\"\");\n    },\n    [messageText, currentChat, sendChatMessage, userInfo._id]\n  );\n  useEffect(() => {\n    if (messages && messages.length > 0) {\n      setTimeout(() => {\n        scroll.current?.scrollIntoView({ behavior: \"smooth\" });\n      }, 100);\n    }\n  }, [messages]);\n\n  useEffect(() => {\n    const handleEnterPress = (e: KeyboardEvent) => {\n      if (e.key === \"Enter\" && !e.shiftKey) {\n        e.preventDefault();\n        handleSubmit();\n      }\n    };\n\n    document.addEventListener(\"keydown\", handleEnterPress);\n\n    return () => {\n      document.removeEventListener(\"keydown\", handleEnterPress);\n    };\n  }, [handleSubmit]);\n\n  if (isLoading) return <div>Loading messages...</div>;\n  if (error) return <div>Error loading messages</div>;\n\n  return (\n    <div className=\"font-concert py-5 px-5\">\n      <div className=\"my-5\">{isWide ? null : <ButtonReturn />}</div>\n      <div className=\"h-screen flex flex-col justify-between overflow-y-auto\">\n        <div>\n          {messages && messages.length > 0 ? (\n            messages.map((message, index) => (\n              <div\n                ref={index === messages.length - 1 ? scroll : undefined}\n                key={message._id}\n                className=\"py-3\"\n              >\n                <p className=\"text-sm underline mb-2\">\n                  {(usersById[message.senderId] as { name: string })?.name ||\n                    \"Unknown User\"}\n                </p>\n                <div\n                  className=\"bg-gray-100 rounded-xl p-3 \"\n                  style={{ maxWidth: \"30ch\" }}\n                >\n                  <p className=\"whitespace-normal break-words\">\n                    {message.text}\n                  </p>\n                  <p className=\"text-xs mt-5\">\n                    {formatDate(message.createdAt)}\n                  </p>\n                </div>\n              </div>\n            ))\n          ) : (\n            <div>No messages yet. Start a conversation!</div>\n          )}\n        </div>\n\n        <div className=\"w-full\">\n          <form className=\"flex items-center\" onSubmit={handleSubmit}>\n            <div\n              className=\"flex-grow\"\n              style={{ minWidth: \"25ch\", maxWidth: \"200ch\" }}\n            >\n              <InputEmoji\n                value={messageText}\n                onChange={setMessageText}\n                placeholder=\"Type a message...\"\n                shouldReturn={false}\n                shouldConvertEmojiToImage={false}\n              />\n            </div>\n            <div className=\"flex-shrink-0 ml-2\">\n              <button\n                type=\"submit\"\n                disabled={!currentChat?._id}\n                className=\"bg-customYellow p-1 rounded-lg hover:border flex items-center justify-center\"\n              >\n                <img src={send} className=\"w-5 h-5\" />\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatBox;\n","import ChatLists from \"./ChatsList\";\nimport OnlineUser from \"./OnlineUser\";\nimport ChatBox from \"./ChatBox\";\nimport useResponsive from \"../../hooks/useResponsive\";\n\nconst Chat = () => {\n  const isLoggedIn = !!localStorage.getItem(\"userInfo\");\n  const isWide = useResponsive(728);\n\n  return (\n    <div className=\"w-full mt-10 p-5 flex flex-col justify-center md:mt-0\">\n\n    <div className=\"mt-10 md:mt-5\">\n      <div className=\"md:flex md:flex-row\">\n        <div className=\"md:w-1/4\">\n        {isLoggedIn && (\n      <div className=\"md:mr-4\">\n        <OnlineUser />\n      </div>\n    )}\n          <ChatLists />\n        </div>\n        <div className=\"md:w-3/4\">\n          {isWide && <ChatBox />}\n        </div>\n      </div>\n    </div>\n  </div>\n  \n  );\n};\n\nexport default Chat;\n","import React, { useState } from \"react\";\nimport { useLoginUserMutation } from \"../../services/apiSlice\";\nimport { useNavigate } from \"react-router-dom\";\nimport { BackendError } from \"../../models\";\n\nconst Login = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loginError, setLoginError] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [loginUser] = useLoginUserMutation();\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setMessage(\"\");\n    setLoginError(\"\");\n\n    try {\n      const response = await loginUser({ email, password }).unwrap();\n      const { _id, name, email: userEmail, token } = response;\n\n      localStorage.setItem(\n        \"userInfo\",\n        JSON.stringify({ _id, name, email: userEmail, token, type: \"login\" })\n      );\n      setMessage(\"Logged In! Redirecting to your Social Media...\");\n\n      setTimeout(() => {}, 5000);\n      navigate(\"/chat\");\n    } catch (err) {\n      const typedError = err as BackendError;\n      const errorMessage =\n        typeof typedError.data === \"string\"\n          ? typedError.data\n          : \"Login failed. Please try again.\";\n      setLoginError(errorMessage);\n    }\n  };\n\n  return (\n    <div className=\"flex items-start mt-10 justify-center font-kode lg:py-40\">\n      <div className=\"px-10 text-left rounded-xl\">\n        <h1 className=\"text-4xl p-5 font-bold text-center\">Login</h1>\n        {message && <p className=\"mb-3 text-sm text-green-500\">{message}</p>}\n        {loginError && (\n          <p className=\"mb-3 text-sm text-red-500\">{loginError}</p>\n        )}\n        <h3 className=\"text-xl font-bold text-center\">and enjoy! &#128512;</h3>\n        <form onSubmit={handleSubmit}>\n          <div className=\"mt-10\">\n            <div className=\"mb-4\">\n              <label\n                className=\"block mb-3 text-md font-semibold\"\n                htmlFor=\"email\"\n              >\n                Email\n              </label>\n              <input\n                type=\"email\"\n                placeholder=\"Email\"\n                className=\"w-full px-4 py-3 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n                id=\"email\"\n                name=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              />\n            </div>\n            <div className=\"mb-4\">\n              <label\n                className=\"block mb-3 text-md font-semibold\"\n                htmlFor=\"password\"\n              >\n                Password\n              </label>\n              <input\n                type=\"password\"\n                placeholder=\"Password\"\n                className=\"w-full px-4 py-3 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n                id=\"password\"\n                name=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n            </div>\n            <div className=\"flex justify-center\">\n              <button\n                type=\"submit\"\n                className=\"px-6 py-2 mt-10 w-full bg-customYellow rounded-lg hover:border border-gray-300\"\n              >\n                Login\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","import { useState } from \"react\";\nimport { useRegisterUserMutation } from \"../../services/apiSlice\";\nimport { BackendError, RegisterInfo } from \"../../models\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst Register = () => {\n  const navigate = useNavigate();\n  const [registerUser] = useRegisterUserMutation();\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    setMessage(\"\");\n    setError(\"\");\n\n    try {\n      const registerInfo: RegisterInfo = {\n        name,\n        email,\n        password,\n        typeToken: \"registration\",\n      };\n\n      const result = await registerUser(registerInfo).unwrap();\n      localStorage.setItem(\n        \"userInfo\",\n        JSON.stringify({ ...result, type: \"registration\" })\n      );\n\n      setMessage(\"Registration successful! Redirecting to login...\");\n\n      setName(\"\");\n      setEmail(\"\");\n      setPassword(\"\");\n\n      setTimeout(() => {\n        navigate(\"/login\");\n      }, 2000);\n    } catch (err) {\n      const typedError = err as BackendError;\n\n      const errorMessage =\n        typeof typedError.data === \"string\"\n          ? typedError.data\n          : \"An error occurred during registration. Please try again.\";\n      setError(errorMessage);\n    }\n  };\n\n  return (\n    <div className=\"flex items-center justify-center font-kode lg:py-40\">\n      <div className=\"px-5  text-left  rounded-xl\">\n        <h1 className=\"text-4xl p-4 font-bold text-center\">Register</h1>\n        {message && <p className=\"mb-3 text-sm text-red-500\">{message}</p>}\n        {error && <p className=\"mb-3 text-sm text-red-500\">{error}</p>}\n\n        <form onSubmit={handleSubmit}>\n          <div className=\"mt-10\">\n            <div className=\"mb-4\">\n              <label\n                className=\"block mb-3  text-md font-semibold\"\n                htmlFor=\"name\"\n              >\n                Name\n              </label>\n              <input\n                type=\"text\"\n                placeholder=\"Name\"\n                className=\"w-full px-4 py-3 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n                id=\"name\"\n                name=\"name\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n              />\n            </div>\n            <div className=\"mb-4\">\n              <label\n                className=\"block mb-3  text-md font-semibold\"\n                htmlFor=\"email\"\n              >\n                Email\n              </label>\n              <input\n                type=\"email\"\n                placeholder=\"Email\"\n                className=\"w-full px-4 py-3 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n                id=\"email\"\n                name=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              />\n            </div>\n            <div className=\"mb-4\">\n              <label\n                className=\"block mb-3  text-md font-semibold\"\n                htmlFor=\"password\"\n              >\n                Password\n              </label>\n              <input\n                type=\"password\"\n                placeholder=\"Password\"\n                className=\"w-full px-4 py-3 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n                id=\"password\"\n                name=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n            </div>\n            <div className=\"flex justify-center\">\n              <button\n                type=\"submit\"\n                className=\"px-6 py-2 mt-10 w-full  bg-customYellow rounded-lg hover:border border-gray-300\"\n              >\n                Register\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\nexport default Register;\n","export default \"__VITE_ASSET__DcDUsKsl__\"","import { Link } from \"react-router-dom\";\nimport home from \"../assets/home-pic.png\";\n\nconst Home = () => {\n  return (\n    <div className=\"w-full font-kode p-2 mb-10 lg:mb-0 lg:py-40\">\n      <div className=\"flex flex-col lg:flex-row-reverse justify-evenly items-center\">\n        <div>\n          <img src={home} alt=\"Broski\" className=\"lg:w-96\"/>\n        </div>\n        <div className=\"text-center lg:text-start\">\n          <h1 className=\"text-black underline decoration-customYellow text-3xl font-bold lg:text-6xl mb-20\">\n            Welcome to Broski!\n          </h1>\n          <div className=\"mt-5\">\n            <h2 className=\"font-bold mb-2\">Join Broski</h2>\n            <p className=\"mb-4\">\n              Register to connect with your best friends and lovers.\n            </p>\n            <Link className=\"\" to=\"/register\">\n              <button className=\"bg-customYellow p-2 rounded-md hover:text-white\">\n                Register\n              </button>\n            </Link>\n          </div>\n          <div className=\"mt-5\">\n            <h2 className=\"font-bold\">Already a member?</h2>\n            <p className=\"mb-4\">\n              Login to start chatting and sharing with your loved ones.\n            </p>\n            <Link to=\"/login\">\n              <button className=\"bg-customYellow p-2 rounded-md hover:text-white\">\n                Login\n              </button>\n            </Link>\n          </div>\n          <div className=\"mt-5\">\n            <h2 className=\"font-bold mb-2\">Stay Connected</h2>\n            <p>Enjoy seamless chatting experiences with your close circle.</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n","import { Routes, Route, Navigate } from \"react-router-dom\";\nimport Layout from \"./Layout/Layout\";\nimport Chat from \"./pages/Chat/Chat\";\nimport Login from \"./pages/Auth/Login\";\nimport Register from \"./pages/Auth/Register\";\nimport Home from \"./components/Home\";\nimport ChatBox from \"./pages/Chat/ChatBox\";\nimport useResponsive from \"./hooks/useResponsive\";\n\nconst RedirectToChatOrLogin = () => {\n  const isLoggedIn = !!localStorage.getItem(\"userInfo\");\n  return isLoggedIn ? <Navigate to=\"/chat\" replace /> : <Home />;\n};\nfunction App() {\n  const isWide = useResponsive(728);\n\n  return (\n    <Layout>\n      <Routes>\n        <Route path=\"/\" element={<RedirectToChatOrLogin />} />\n        <Route path=\"/home\" element={<Home />} />\n        <Route path=\"/register\" element={<Register />} />\n        <Route path=\"/login\" element={<Login />} />\n        <Route path=\"*\" element={<Navigate to=\"/\" />} />\n        {isWide ? (\n          <Route path=\"/chat\" element={<Chat />}>\n            <Route path=\":chatId\" element={<ChatBox />} />\n          </Route>\n        ) : (\n          <>\n            <Route path=\"/chat\" element={<Chat />} />\n            <Route path=\"/chat/:chatId\" element={<ChatBox />} />\n          </>\n        )}\n      </Routes>\n    </Layout>\n  );\n}\n\nexport default App;\n","import { configureStore } from '@reduxjs/toolkit';\nimport { combineReducers } from 'redux';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\nimport authSlice from './authSlice';\nimport chatReducer from './chatSlice';\nimport { apiSlice } from '../services/apiSlice';\n\nconst rootReducer = combineReducers({\n  auth: authSlice,\n  chat: chatReducer,\n  [apiSlice.reducerPath]: apiSlice.reducer,\n});\n\nconst persistConfig = {\n  key: 'root',\n  storage,\n  whitelist: ['auth', 'chat'], \n};\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\n\nexport const store = configureStore({\n  reducer: persistedReducer,\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      serializableCheck: {\n        ignoredActions: ['persist/PERSIST', 'persist/REHYDRATE', 'persist/PAUSE', 'persist/PERSIST', 'persist/PURGE', 'persist/REGISTER'],\n      },\n    }).concat(apiSlice.middleware),\n});\n\nexport const persistor = persistStore(store);\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\nimport { PersistGate } from 'redux-persist/integration/react';\nimport App from \"./App\";\nimport { store, persistor } from \"./store/store\"; \nimport \"./main.css\";\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\") as HTMLElement);\nroot.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <Provider store={store}>\n        <PersistGate loading={null} persistor={persistor}>\n          <App />\n        </PersistGate>\n      </Provider>\n    </BrowserRouter>\n  </React.StrictMode>\n);\n"],"names":["linkedin","github","Footer","jsxs","jsx","Link","logo","initialState","authSlice","createSlice","state","action","_id","name","email","token","password","addUserRegister","loginUser","logoutUser","authSlice$1","Header","navigate","useNavigate","dispatch","useDispatch","userInfo","isLoggedIn","handleLogout","handleRedirectToChat","Fragment","Layout","children","chatSlice","getUserChats","addChat","isChatsLoading","setCurrentChat","chatReducer","apiSlice","createApi","fetchBaseQuery","builder","credentials","userId","ids","members","chatId","_","__","senderId","text","useRegisterUserMutation","useLoginUserMutation","useFetchChatsByUserIdQuery","useFetchUsersByIdsQuery","useFetchRegisteredUsersQuery","useCreateChatMutation","useFetchMessagesByChatIdQuery","useSendChatMessageMutation","useDeleteChatMutation","formatDate","dateString","avatar","trashIcon","useLastMessages","chatIds","lastMessages","setLastMessages","useState","useEffect","fetchLastMessages","promises","data","lastMessage","lastMessagesMap","acc","SOCKET_URL","socket","io","ChatList","users","setUsers","onlineUsers","setOnlineUsers","deleteChat","currentChat","useSelector","unreadChats","setUnreadChats","isSmartphone","setIsSmartphone","chatData","isLoadingChats","errorChats","refetch","onlineUsersList","user","unread","prevUnreadChats","id","memberIds","chat","usersData","usersById","handleResize","handleDeleteChat","err","truncateMessage","message","maxLength","handleChatClick","displayName","_a","isOnline","e","_b","OnlineUser","loadingUsers","loggedInUserId","loadingChats","createChat","displayUsers","setDisplayUsers","newMessageNotification","setNewMessageNotification","userIds","filteredUsers","handleCreateChat","secondUserId","send","back","ButtonReturn","handleGoBack","useResponsive","widthThreshold","isWide","setIsWide","ChatBox","messageText","setMessageText","sendChatMessage","scroll","useRef","messages","isLoading","error","senderIds","useMemo","newMessage","handleSubmit","useCallback","messageData","handleEnterPress","index","InputEmoji","Chat","ChatLists","Login","setEmail","setPassword","loginError","setLoginError","setMessage","response","userEmail","typedError","errorMessage","Register","registerUser","setName","setError","result","home","Home","RedirectToChatOrLogin","Navigate","App","Routes","Route","rootReducer","combineReducers","persistConfig","storage","persistedReducer","persistReducer","store","configureStore","getDefaultMiddleware","persistor","persistStore","root","ReactDOM","React","BrowserRouter","Provider","PersistGate"],"mappings":"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"}